## 鉴权系统设计

对象对象分析 -- 详细的需求描述

面向对象设计 -- 类

- 划分职责进而识别出有哪些类
- 定义类及其属性和方法
- 定义类与类之间的交互关系
- 将类组装起来并提供执行入口

### 需求描述
1. 调用方进行接口请求的时候，将URL、appId、密码、时间戳拼接在一起，通过加密算法生成token，并且将token、appId、时间戳拼接在URL中，一并发送到服务端
2. 微服务端在接收到调用方的接口请求之后，从请求中拆解出token、appId、时间戳
3. 微服务端首先检查传递过来的时间戳跟当前时间，是否在token失效时间窗口内。如果已经超过失效时间，那就算接口调用鉴权失败，拒绝接口调用请求
4. 如果token验证没有过期失效，微服务端再从自己的存储总，取出appId对应的密码，通过同样的token生成算法，生成另一个token，与调用方传递过来的token进行匹配。如果一致，则鉴权成功，允许接口调用，否则就拒绝接口调用

### 功能点列表
1. 把url、appId、密码、时间戳拼接为一个字符串
2. 对字符串通过加密算法加密生成token
3. 将token、appId、时间戳拼接到url中，形成新的url
4. 解析url，得到token、appId、时间戳等信息
5. 从存储中取出appId和对应的密码
6. 根据时间戳判断token是否过期失效
7. 验证两个token是否匹配

得到三个核心的类 AuthToken、Url、CredentialStorage

### 类与类之间的关系
1. 泛化 
2. 继承
3. 组合   只要B类对象是A类对象的成员变量，那A和B就是组合关系
4. 依赖   B类在A类除了成员变量使用外，就是依赖关系，

